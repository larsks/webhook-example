apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
commonLabels:
  app: webhook-receiver

resources:
- ../../base

patches:
- patch: |
    apiVersion: build.openshift.io/v1
    kind: BuildConfig
    metadata:
      name: webhook-receiver
    spec:
      source:
        git:
          uri: https://github.com/larsks/webhook-example.git

secretGenerator:
- name: github-buildconfig
  behavior: replace
  envs:
  - github-buildconfig.env
- name: webhook-receiver
  behavior: replace
  envs:
  - webhook-receiver.env
