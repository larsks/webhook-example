apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
commonLabels:
  app: webhook-receiver
resources:
- deployment.yaml
- service.yaml
- ingress.yaml
- buildconfig.yaml
- imagestream.yaml

secretGenerator:
  - name: github-buildconfig-secret
    options:
      disableNameSuffixHash: true
    files:
      - WebHookSecretKey=secrets/github-buildconfig-secret
  - name: webhook-receiver
    files:
      - FLASK_GITHUB_WEBHOOK_SECRET=secrets/github-notification-secret
      - FLASK_SLACK_WEBHOOK_URL=secrets/slack-webhook-url
